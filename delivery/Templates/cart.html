<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart - BiteNow</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body class="admin-page">

    <div class="container">
        
        <header class="page-header" style="text-align: left; display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h3>Your Cart üõí</h3>
                <p class="subtitle">Ready to eat, <span class="highlight">{{ username }}</span>?</p>
            </div>
            <a href="javascript:history.back()" class="back-link">‚Üê Add more items</a>
        </header>

        <div class="table-wrapper">
            <table class="styled-table">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Details</th>
                        <th>Price</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in itemList %}
                        <tr>
                            <td style="width: 100px;">
                                <img src="{{ item.picture }}" class="table-img" alt="{{ item.name }}" style="width: 80px; height: 80px; border-radius: 12px;">
                            </td>
                            
                            <td>
                                <div style="font-weight: 700; font-size: 1.1rem; color: #2c3e50;">{{ item.name }}</div>
                                <div style="color: #7f8c8d; font-size: 0.9rem; margin-top: 5px;">
                                    {{ item.description|truncatewords:15 }}
                                </div>
                            </td>
                            
                            <td style="font-weight: 600; font-size: 1.1rem; color: #2c3e50;">
                                ‚Çπ{{ item.price }}
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="3" style="text-align: center; padding: 40px; color: #999;">
                                Your cart is empty. üò¢ <br>
                                <a href="javascript:history.back()" style="color: #ff6b6b; font-weight: bold;">Go add some food!</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        {% if itemList %} 
            <div class="cart-summary-box">
                <div class="total-label">Total Amount:</div>
                <div class="total-price">‚Çπ{{ total_price }}</div>
                
                <form action="{% url 'checkout' username %}" method="post" style="width: 100%;">
                    {% csrf_token %}
                    <input type="submit" value="PROCEED TO CHECKOUT üí≥" class="submit-btn" />
                </form>
            </div>
        {% endif %}

    </div>

</body>
</html>